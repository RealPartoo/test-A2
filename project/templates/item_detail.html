{% extends "base.html" %}
{% block title %}{{ item.title }} Â· Art lease{% endblock %}

{% block content %}
<div class="container py-4 py-md-5">
  <a href="{{ url_for('main.gallery') }}" class="text-decoration-none small">&larr; Back to Gallery</a>

  <div class="row g-4 g-lg-5 mt-1">
    <!-- Image -->
    <div class="col-12 col-lg-6">
      <div class="card shadow-sm border-0 rounded-4">
        <div class="card-body p-2">
          <div class="ratio ratio-16x9 bg-light rounded-3 overflow-hidden">
            <img src="{{ url_for('static', filename=item.imageUrl) }}" alt="{{ item.title }}" class="img-fluid">
          </div>
        </div>
      </div>
    </div>

    <!-- Details -->
    <div class="col-12 col-lg-6">
      <div class="d-flex align-items-start gap-3">
        <h2 class="mb-0 flex-grow-1">{{ item.title }}</h2>
        <span class="badge rounded-pill {{ 'text-bg-success' if item.leaseStatus=='Available' else 'text-bg-secondary' }}">
          {{ item.leaseStatus }}
        </span>
      </div>

      <div class="mt-2">
        <div class="fw-semibold">{{ item.artistName }}{% if item.year %}, {{ item.year }}{% endif %}</div>
        {% if item.galleryName %}
          <div class="text-muted">{{ item.galleryName }}</div>
        {% endif %}
      </div>

      <div class="mt-3 small text-muted">
        {% if item.type %}<span class="me-2">{{ item.type }}</span>{% endif %}
        {% if item.genre %}<span class="me-2">| {{ item.genre }}</span>{% endif %}
        {% if item.size %}<span class="me-2">| {{ item.size }}</span>{% endif %}
      </div>

      <div class="mt-4">
        <h6 class="text-muted mb-2">Description</h6>
        <p class="mb-0">{{ item.description or 'No description provided.' }}</p>
      </div>

      <div class="mt-4">
        <h6 class="text-muted mb-1">Price</h6>
        <div class="fs-4 fw-bold">AUD {{ '%.2f'|format(item.pricePerMonth|float) }} <span class="fs-6 fw-normal text-muted">/ month</span></div>
      </div>

      <!-- Add to cart -->
      <div class="card mt-4 shadow-sm border-0 rounded-4">
        <div class="card-body">
          <form class="row g-2 align-items-center"
                method="post"
                action="{{ url_for('main.cart_add', item_id=item.artworkId) }}">
            <div class="col-12">
              <label for="months" class="form-label mb-1">Select Rental Period</label>
              <div class="input-group">
                <select id="months" name="months" class="form-select">
                  {% for m in range(1, 13) %}
                    <option value="{{ m }}">{{ m }}</option>
                  {% endfor %}
                </select>
                <button class="btn btn-dark"
                        type="submit"
                        {% if item.leaseStatus != 'Available' %}disabled{% endif %}>
                  +Add
                </button>
              </div>
              {% if item.leaseStatus != 'Available' %}
                <div class="form-text text-danger">This artwork is currently unavailable.</div>
              {% endif %}
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}
